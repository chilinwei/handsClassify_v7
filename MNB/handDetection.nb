(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.4' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     12418,        251]
NotebookOptionsPosition[     12121,        236]
NotebookOutlinePosition[     12477,        252]
CellTagsIndexPosition[     12434,        249]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Set", " ", "default", " ", "directory"}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"SetDirectory", "[", 
     RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "Set", " ", "training", " ", "images", " ", "LABEL", " ", "and", " ", 
     "Path"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"training", " ", "=", " ", 
     RowBox[{"List", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\"\<L\>\"", ",", " ", "\"\<./training/LH/*.jpg\>\""}], "}"}],
        ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"\"\<R\>\"", ",", " ", "\"\<./training/RH/*.jpg\>\""}], 
        "}"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{
     "Set", " ", "test", " ", "images", " ", "file", " ", "and", " ", 
      "path"}], ",", " ", 
     RowBox[{
     "must", " ", "use", " ", "absolute", " ", "file", " ", "path"}]}], " ", 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
    "tePath", " ", "=", " ", 
     "\"\<C:/Users/chili/Desktop/HandsClassify_20170331/programs_tw/result.\
txt\>\""}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "Import", " ", "images", " ", "and", " ", "training", " ", "CLASSIFY"}], 
    " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"trImages", " ", "=", " ", 
     RowBox[{
      RowBox[{
       RowBox[{"Import", "[", "#", "]"}], "&"}], "/@", 
      RowBox[{"training", "[", 
       RowBox[{"[", 
        RowBox[{"All", ",", "2"}], "]"}], "]"}]}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"trLabImages", " ", "=", " ", 
     RowBox[{"RandomSample", "[", 
      RowBox[{"DeleteDuplicates", "[", 
       RowBox[{"Flatten", "[", 
        RowBox[{"Thread", "/@", " ", 
         RowBox[{"Thread", "[", 
          RowBox[{"trImages", "\[Rule]", 
           RowBox[{"training", "[", 
            RowBox[{"[", 
             RowBox[{"All", ",", "1"}], "]"}], "]"}]}], "]"}]}], "]"}], "]"}],
       "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"c", " ", "=", " ", 
     RowBox[{"Classify", "[", 
      RowBox[{"trLabImages", ",", " ", 
       RowBox[{"Method", "\[Rule]", "\"\<LogisticRegression\>\""}]}], "]"}]}],
     ";"}]}]}]], "Input",
 CellChangeTimes->{{3.697237735013645*^9, 3.697237748048016*^9}, {
   3.6972510463773003`*^9, 3.6972510505742283`*^9}, {3.6972539592790174`*^9, 
   3.6972540155032635`*^9}, {3.697254401737873*^9, 3.6972544030636406`*^9}, {
   3.6972545464623847`*^9, 3.6972545913257923`*^9}, {3.6972548500954733`*^9, 
   3.697254877512933*^9}, {3.6972549277744455`*^9, 3.6972549936097083`*^9}, {
   3.6972550766244097`*^9, 3.697255080103506*^9}, {3.6972551548119535`*^9, 
   3.697255175345954*^9}, {3.697255211030624*^9, 3.6972553491911783`*^9}, {
   3.697255466819543*^9, 3.6972554881896963`*^9}, {3.697255720912632*^9, 
   3.697255788314094*^9}, {3.6972558268805285`*^9, 3.69725595906777*^9}, {
   3.69725603122575*^9, 3.697256035354116*^9}, {3.697256071199456*^9, 
   3.6972561395219345`*^9}, {3.697256182568656*^9, 3.6972562840019984`*^9}, {
   3.697256755353224*^9, 3.697256772198533*^9}, {3.697256834019207*^9, 
   3.6972568502099447`*^9}, {3.6972568872283187`*^9, 3.697256926687865*^9}, {
   3.6972573316230016`*^9, 3.6972575002859936`*^9}, {3.6972575464127817`*^9, 
   3.697257579090104*^9}, 3.6972576116101847`*^9, {3.697257665642951*^9, 
   3.6972578115133014`*^9}, {3.69725789521*^9, 3.6972579268090267`*^9}, {
   3.6972579642826195`*^9, 3.6972580229437213`*^9}, {3.697258278990913*^9, 
   3.6972582868651595`*^9}, {3.6972583640563707`*^9, 
   3.6972584030783243`*^9}, {3.6972584506235275`*^9, 
   3.6972584639198604`*^9}, {3.6972589422767105`*^9, 3.697258997672525*^9}, {
   3.6972590301711273`*^9, 3.6972591071644745`*^9}, {3.6972594977108345`*^9, 
   3.6972595587231135`*^9}, {3.6972595894031415`*^9, 
   3.6972596226966133`*^9}, {3.6972823899983764`*^9, 3.697282392540069*^9}, 
   3.697284824500828*^9, {3.6973391944782953`*^9, 3.69733920013993*^9}, {
   3.6973392439562664`*^9, 3.697339251871982*^9}, {3.6973393140075026`*^9, 
   3.6973393165200586`*^9}, {3.697345180087448*^9, 3.6973452284651833`*^9}, {
   3.697347314875141*^9, 3.697347315739588*^9}, {3.6976808646180134`*^9, 
   3.6976808801704245`*^9}, 3.697680918889909*^9, 3.697694269205017*^9, 
   3.6976944608163366`*^9, 3.6977215229461803`*^9, 3.6977220950710473`*^9, {
   3.6977770031538525`*^9, 3.697777011653595*^9}, 3.697777355658022*^9, {
   3.6978407087990694`*^9, 3.6978407277246003`*^9}, 3.6983780122985945`*^9, 
   3.698378091413124*^9, {3.6983845073824153`*^9, 3.6983845296124*^9}, 
   3.698710890974677*^9, 3.6987336670719314`*^9, 3.6990657425046716`*^9, 
   3.6999295433028145`*^9, 3.7021747854061704`*^9, 3.704844287667391*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"Import", " ", "testing", " ", "image"}], ",", " ", 
    RowBox[{"run", " ", "scheduled", " ", "every", " ", "1", " ", "sec"}]}], 
   " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"RunScheduledTask", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"DynamicModule", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"result", " ", "=", " ", 
         RowBox[{"ReadList", "[", 
          RowBox[{"tePath", ",", " ", "Word", ",", 
           RowBox[{"WordSeparators", "\[Rule]", 
            RowBox[{"{", 
             RowBox[{
             "\"\<,\>\"", ",", "\"\<{\>\"", ",", "\"\<}\>\"", ",", 
              "\"\<\\\"\>\""}], "}"}]}]}], "]"}]}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Check", "[", 
           RowBox[{
            RowBox[{"result", "[", 
             RowBox[{"[", "2", "]"}], "]"}], ",", "\"\<NA\>\""}], "]"}], " ", 
          "\[Equal]", " ", "\"\<NA\>\""}], ",", "\[IndentingNewLine]", 
         RowBox[{"Export", "[", " ", 
          RowBox[{"tePath", ",", 
           RowBox[{"ToString", "@", 
            RowBox[{"{", " ", 
             RowBox[{
              RowBox[{"result", "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", 
              RowBox[{"c", "[", 
               RowBox[{"Import", "[", 
                RowBox[{"result", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], " ", 
             "}"}]}]}], "]"}]}], "\[IndentingNewLine]", "]"}]}], 
      "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ",", "1"}], "]"}], 
   ";"}]}]], "Input",
 CellChangeTimes->{
  3.6972596367677574`*^9, {3.697259691824682*^9, 3.697259718096729*^9}, {
   3.6972598047202525`*^9, 3.6972600088732553`*^9}, {3.697260112419594*^9, 
   3.697260120440669*^9}, {3.697260203025446*^9, 3.6972602039402885`*^9}, 
   3.6972603603517046`*^9, {3.6972604148005476`*^9, 3.69726041720161*^9}, {
   3.6972604891050243`*^9, 3.697260521141285*^9}, {3.697260674505044*^9, 
   3.697260722329933*^9}, {3.697260773089735*^9, 3.697260939672144*^9}, {
   3.6972609801775155`*^9, 3.6972610209869432`*^9}, {3.6972611079489546`*^9, 
   3.6972611898981223`*^9}, {3.6972612220694084`*^9, 3.697261223019071*^9}, {
   3.697261266353841*^9, 3.697261299673152*^9}, 3.697261336353783*^9, 
   3.6972806753764243`*^9, {3.6972807870917788`*^9, 3.697280788664773*^9}, {
   3.6972808250716496`*^9, 3.6972808312405815`*^9}, {3.697281417172623*^9, 
   3.6972814191730785`*^9}, 3.697281467211951*^9, 3.697282273334057*^9, {
   3.697282312569543*^9, 3.6972823337775126`*^9}, {3.6972824082976055`*^9, 
   3.69728243079556*^9}, {3.697284473405453*^9, 3.6972845269933863`*^9}, {
   3.6972845657343206`*^9, 3.6972846251619186`*^9}, {3.6972848499093337`*^9, 
   3.6972848524880476`*^9}, {3.6972848840863934`*^9, 
   3.6972850493101015`*^9}, {3.6972852707229285`*^9, 3.697285290765211*^9}, {
   3.6972853323800087`*^9, 3.6972853752692623`*^9}, {3.6972854965498037`*^9, 
   3.697285500193742*^9}, {3.697285650521829*^9, 3.6972856597370105`*^9}, {
   3.6972857208346186`*^9, 3.697285741048421*^9}, {3.6972857715290756`*^9, 
   3.697285773214286*^9}, {3.697285847751773*^9, 3.6972859031229596`*^9}, 
   3.6972859391000495`*^9, {3.697286021772932*^9, 3.6972860472556496`*^9}, {
   3.697286623057192*^9, 3.697286858590479*^9}, {3.697286907923673*^9, 
   3.6972869567747536`*^9}, 3.6972869879878254`*^9, {3.6972870716405573`*^9, 
   3.6972871583717227`*^9}, {3.6972871895951195`*^9, 
   3.6972872251266727`*^9}, {3.6972873171186647`*^9, 3.697287318676364*^9}, {
   3.69728737647882*^9, 3.697287380490572*^9}, 3.6972886640658345`*^9, {
   3.6973376034666348`*^9, 3.6973376758760586`*^9}, 3.6973378037656083`*^9, {
   3.6973383962397385`*^9, 3.697338422707758*^9}, {3.6973389426557627`*^9, 
   3.6973390805362043`*^9}, {3.6973391252280917`*^9, 
   3.6973391304806466`*^9}, {3.69733918513395*^9, 3.6973391888519545`*^9}, {
   3.697339361845152*^9, 3.697339389695186*^9}, {3.697339472324374*^9, 
   3.6973394997338133`*^9}, {3.697339559637908*^9, 3.697339617012706*^9}, {
   3.697339678909193*^9, 3.6973397534703703`*^9}, {3.697340059542204*^9, 
   3.697340083665253*^9}, {3.6973401370865283`*^9, 3.697340223732595*^9}, {
   3.6973403533181477`*^9, 3.6973403615192337`*^9}, {3.6973410516330366`*^9, 
   3.697341076375371*^9}, {3.697343700770486*^9, 3.697343718243777*^9}, {
   3.6973441062655573`*^9, 3.6973441373254185`*^9}, {3.697344183825947*^9, 
   3.6973441849440145`*^9}, {3.6973442363278084`*^9, 
   3.6973442752397137`*^9}, {3.697344313275047*^9, 3.6973443841747437`*^9}, {
   3.697344460275134*^9, 3.6973444839038973`*^9}, 3.6973447851615767`*^9, {
   3.6973449254618464`*^9, 3.697344928442687*^9}, {3.6973450422275186`*^9, 
   3.6973450455794153`*^9}, {3.697345946933527*^9, 3.6973459839999886`*^9}, {
   3.6973460241915007`*^9, 3.697346066508712*^9}, {3.697346340624806*^9, 
   3.6973464672790546`*^9}, {3.6973465018606014`*^9, 
   3.6973465086425753`*^9}, {3.6973468532584915`*^9, 3.697346880495434*^9}, {
   3.6973469585698166`*^9, 3.6973469645725965`*^9}, {3.697347236999567*^9, 
   3.6973472706756115`*^9}, {3.697347548693157*^9, 3.6973475551525865`*^9}, {
   3.6973476011607895`*^9, 3.6973476123235855`*^9}, {3.6973478097573752`*^9, 
   3.697347816954799*^9}, {3.697348102744643*^9, 3.6973481070464497`*^9}, 
   3.697348327084651*^9, 3.6973485293189836`*^9, {3.6973485965459337`*^9, 
   3.697348613161865*^9}, {3.6973486494214478`*^9, 3.6973486807544274`*^9}, {
   3.697348768400807*^9, 3.6973487743899293`*^9}, {3.697349155509612*^9, 
   3.6973491662438993`*^9}, 3.697349225571106*^9, {3.697349316151574*^9, 
   3.697349319620161*^9}, {3.697349372426487*^9, 3.6973493997348537`*^9}, {
   3.697349466387652*^9, 3.6973494698322034`*^9}, {3.6973495612509055`*^9, 
   3.6973495670346055`*^9}, {3.6973501600326486`*^9, 
   3.6973501625149727`*^9}, {3.6973502046610217`*^9, 
   3.6973502063545046`*^9}, {3.697350328859841*^9, 3.6973503330244017`*^9}, {
   3.6973503821132803`*^9, 3.6973503831692095`*^9}, {3.697350463880847*^9, 
   3.6973504647028656`*^9}, {3.6973505317445784`*^9, 
   3.6973505330005198`*^9}, {3.697366511949966*^9, 3.697366515646434*^9}, 
   3.6973665768330975`*^9, {3.697367657186365*^9, 3.697367663870121*^9}, {
   3.69736833975119*^9, 3.6973683962934804`*^9}, 3.697368438014303*^9, {
   3.6976810962271147`*^9, 3.6976811084581776`*^9}, {3.697756881086459*^9, 
   3.697756885465414*^9}, 3.697757042911036*^9, {3.6978407718362627`*^9, 
   3.697840805243369*^9}}]
},
WindowSize->{1264, 637},
WindowMargins->{{-8, Automatic}, {Automatic, 0}},
FrontEndVersion->"10.4 for Microsoft Windows (64-bit) (2016\:5e742\:670825\
\:65e5)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 4989, 101, 400, "Input"],
Cell[5550, 123, 6567, 111, 244, "Input"]
}
]
*)

